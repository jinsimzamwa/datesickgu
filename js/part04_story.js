const part04_story = [
  {
    characters: [
      { name: 'jakurai', position: 'left', expression: 'default' },
      { name: 'hitoya', position: 'center', expression: 'haa' },
      { name: 'rei', position: 'right', expression: 'default' },
    ],
    speaker: {
      kor: '아마구니 히토야',
      jpn: '天国 獄',
    },
    text: {
      kor: '젠장, 결국 내가 샀잖아.',
      jpn: 'くそっ、結局俺の奢りじゃねーか。',
    },
  },
  {
    characters: [
      { name: 'jakurai', position: 'left', expression: 'smile' },
      { name: 'hitoya', position: 'center', expression: 'haa' },
      { name: 'rei', position: 'right', expression: 'default' },
    ],
    speaker: {
      kor: '진구지 쟈쿠라이',
      jpn: '神宮寺 寂雷',
    },
    text: {
      kor: '잘 먹었어, 히토야.',
      jpn: 'ごちそうさま、獄。',
    },
  },
  {
    characters: [
      { name: 'jakurai', position: 'left', expression: 'smile' },
      { name: 'hitoya', position: 'center', expression: 'haa' },
      { name: 'rei', position: 'right', expression: 'laugh' },
    ],
    speaker: {
      kor: '아마야도 레이',
      jpn: '天谷奴 零',
    },
    text: {
      kor: '하하, 맛있었다고~',
      jpn: 'ははっ、うまかったぜ〜。',
    },
  },
  {
    characters: [
      { name: 'jakurai', position: 'left', expression: 'smile' },
      { name: 'hitoya', position: 'center', expression: 'default' },
      { name: 'rei', position: 'right', expression: 'laugh' },
    ],
    speaker: {
      kor: '아마구니 히토야',
      jpn: '天国 獄',
    },
    text: {
      kor: '배로 받아낼 거니까 감사인사는 하지 않아도 된다고.',
      jpn: '倍で取り返すから、礼なんかいらねぇよ。',
    },
  },
  {
    characters: [
      { name: 'jakurai', position: 'left', expression: 'smile' },
      { name: 'hitoya', position: 'center', expression: 'eyes' },
      { name: 'rei', position: 'right', expression: 'laugh' },
    ],
    speaker: {
      kor: '아마구니 히토야',
      jpn: '天国 獄',
    },
    text: {
      kor: '...아니, 됐어. 이미 사버린거, 구질구질하게 구는 것도 취향 아니고.',
      jpn: '…いや、もういい。奢ったもんは仕方ねぇし、ネチネチ言うのも性に合わねぇ。',
    },
  },
  {
    characters: [
      { name: 'hitoya', position: 'center', expression: 'default' },
    ],
    speaker: {
      kor: '아마구니 히토야',
      jpn: '天国 獄',
    },
    text: {
      kor: '밥도 사줬으니 이젠 정말 얌전히들 흩어져.',
      jpn: 'メシまで奢ったんだからよ、もう大人しく解散しな。',
    },
  },
  {
    characters: [
      { name: 'ichiro', position: 'left', expression: 'default' },
      { name: 'kuko', position: 'right', expression: 'hya' },
    ],
    speaker: {
      kor: '하라이 쿠코',
      jpn: '波羅夷 空却',
    },
    text: {
      kor: '이치로오! 오락실이나 갈까.',
      jpn: '一郎ぉ！ゲーセンでも行こうぜ！',
    },
  },
  {
    characters: [
      { name: 'ichiro', position: 'left', expression: 'default' },
      { name: 'kuko', position: 'right', expression: 'default' },
    ],
    speaker: {
      kor: '야마다 이치로',
      jpn: '山田一郎',
    },
    text: {
      kor: '좋지! 전부 이겨주겠어!',
      jpn: 'いいな！どれでもブッ倒してやるよ！',
    },
  },
  {
    characters: [
      { name: 'ichiro', position: 'left', expression: 'default' },
      { name: 'kuko', position: 'right', expression: 'hya' },
    ],
    speaker: {
      kor: '하라이 쿠코',
      jpn: '波羅夷 空却',
    },
    text: {
      kor: '햣하, 소승이 져줄까 보냐!',
      jpn: 'ヒャッハ！この拙僧が負けるとでも思うか？',
    },
  },
  {
    characters: [
      { name: 'rei', position: 'center', expression: 'laugh' },
    ],
    speaker: {
      kor: '아마야도 레이',
      jpn: '天谷奴 零',
    },
    text: {
      kor: '오락실인가~ 역시 아직 애구만.',
      jpn: 'お、ゲーセンか？まだガキだな〜。',
    },
  },
  {
    characters: [
      { name: 'saburo', position: 'center', expression: 'default' },
    ],
    speaker: {
      kor: '야마다 사부로',
      jpn: '山田三郎',
    },
    text: {
      kor: '따라가자!',
      jpn: 'ついていこう！',
    },
  },
  {
    characters: [
      { name: 'rei', position: 'left', expression: 'laugh' },
      { name: 'hitoya', position: 'right', expression: 'haa' },
    ],
    speaker: {
      kor: '아마구니 히토야',
      jpn: '天国 獄',
    },
    text: {
      kor: '뭘 따라가! 질리지도 않냐 너네는.',
      jpn: '何ついていってんだよ！お前ら飽きねーのかよ。',
    },
  },
  {
    characters: [
      { name: 'rei', position: 'left', expression: 'laugh' },
      { name: 'hitoya', position: 'right', expression: 'default' },
    ],
    speaker: {
      kor: '아마야도 레이',
      jpn: '天谷奴 零',
    },
    text: {
      kor: '어이쿠, 벌써 포기야? 아직 시작도 안했구만. 시시하네~',
      jpn: 'おっと、もう諦めんのか？まだ始まってもねぇのに？つまんねぇな〜。',
    },
  },
  {
    characters: [
      { name: 'rei', position: 'left', expression: 'laugh' },
      { name: 'hitoya', position: 'right', expression: 'haaa' },
    ],
    speaker: {
      kor: '아마구니 히토야',
      jpn: '天国 獄',
    },
    text: {
      kor: '누가 포기한다는거야!?',
      jpn: '誰が諦めたって！？',
    },
  },
  {
    next: './game/part04_story2.html'
  }
];



$(function () {
    const seenEndings = JSON.parse(localStorage.getItem('seenEndings') || '[]');
		const hasEnd05 = seenEndings.includes('end05');

		if (hasEnd05) {
			$('.skipBtn').show();
		} else {
			$('.skipBtn').hide();
		}
    
  bgmManager.play('story3', true, false);
  bgmManager.fadeIn(0.7, 2000);
  initDialogue({ sectionSelector: '.part04_story', script: part04_story });
});

$('.skipBtn').click(function () {
    const lastLine = part04_story[part04_story.length - 1];
    if (lastLine.next) {
        $('.container-inner').css('opacity', 0).load(lastLine.next, function () {
            $('.container-inner').animate({ opacity: 1 }, 800);
        });
    }
});
