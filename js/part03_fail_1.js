const part03_fail_1 = [
  {
    characters: [
    ],
    speaker: {
      kor: '',
      jpn: '',
    },
    text: {
      kor: '(슝...)',
      jpn: '（シュッ……）',
    },
  },
  {
    characters: [
    ],
    speaker: {
      kor: '',
      jpn: '',
    },
    text: {
      kor: '(쾅!!!!!!!!!!!!!!)',
      jpn: '（ドカァァァァン！！！！！！）',
    },
  },
  {
    characters: [
      { name: 'kuko', position: 'center', expression: 'waa' },
    ],
    speaker: {
      kor: '하라이 쿠코',
      jpn: '波羅夷 空却',
    },
    text: {
      kor: '아파!!!!!',
      jpn: 'いてぇぇぇぇ！！！！',
    },
  },
  {
    characters: [
      { name: 'ichiro', position: 'center', expression: 'waa' },
    ],
    speaker: {
      kor: '야마다 이치로',
      jpn: '山田一郎',
    },
    text: {
      kor: '쿠, 쿠코!? 갑자기 의자가 부서졌어...!?',
      jpn: 'く、空却！？急に椅子が壊れた……！？',
    },
  },
  {
    characters: [
      { name: 'jakurai', position: 'center', expression: 'at' },
    ],
    speaker: {
      kor: '진구지 쟈쿠라이',
      jpn: '神宮寺 寂雷',
    },
    text: {
      kor: '...이런, 너무 간만이라 힘조절을...',
      jpn: '久しぶりすぎて力の調節が···',
    },
  },
  {
    characters: [
      { name: 'kuko', position: 'center', expression: 'dare' },
    ],
    speaker: {
      kor: '하라이 쿠코',
      jpn: '波羅夷 空却',
    },
    text: {
      kor: '뭐야...',
      jpn: '何奴だ！',
    },
  },
  {
    characters: [
      { name: 'kuko', position: 'center', expression: 'ee' },
    ],
    speaker: {
      kor: '하라이 쿠코',
      jpn: '波羅夷 空却',
    },
    text: {
      kor: '엉? 히토야아?',
      jpn: '……って、獄？',
    },
  },
  {
    characters: [
      { name: 'ichiro', position: 'center', expression: 'gon' },
    ],
    speaker: {
      kor: '야마다 이치로',
      jpn: '山田一郎',
    },
    text: {
      kor: '아마구니 씨가 왜... 어라, 사부로? 쟈쿠라이 씨도...?',
      jpn: '天国さんがなんで……って、三郎？寂雷さんも……？',
    },
  },
  {
    characters: [
      { name: 'rei', position: 'center', expression: 'default' },
    ],
    speaker: {
      kor: '아마야도 레이',
      jpn: '天谷奴 零',
    },
    text: {
      kor: '파파는 안보이는거냐?',
      jpn: 'パパは見えないのかな〜？',
    },
  },
  {
    characters: [
      { name: 'saburo', position: 'center', expression: 'at' }
    ],
    speaker: {
      kor: '야마다 사부로',
      jpn: '山田三郎',
    },
    text: {
      kor: '아차, 이치형...',
      jpn: 'い、一兄…',
    },
  },
  {
    characters: [
      { name: 'ichiro', position: 'center', expression: 'gon' },
    ],
    speaker: {
      kor: '야마다 이치로',
      jpn: '山田一郎',
    },
    text: {
      kor: '다들 왜 여기에...',
      jpn: 'みんな、なんでここに…',
    },
  }, 
  {
    characters: [
      { name: 'jakurai', position: 'center', expression: 'at' },
    ],
    speaker: {
      kor: '진구지 쟈쿠라이',
      jpn: '神宮寺 寂雷',
    },
    text: {
      kor: '미안합니다, 쿠코 군. 장난이 과했던 것 같아요.',
      jpn: 'ごめんなさい、波羅夷くん。 いたずらがいきすぎたようです。',
    },
  },
  {
    characters: [
      { name: 'saburo', position: 'center', expression: 'at' }
    ],
    speaker: {
      kor: '야마다 사부로',
      jpn: '山田三郎',
    },
    text: {
      kor: '바보, 그걸 말하면!',
      jpn: 'ばか、それを言ったら！',
    },
  },
  {
    characters: [
      { name: 'kuko', position: 'center', expression: 'dare' },
    ],
    speaker: {
      kor: '하라이 쿠코',
      jpn: '波羅夷 空却',
    },
    text: {
      kor: '뭐야, 쟈쿠라이. 네가 한거냐?',
      jpn: 'んだよ、寂雷。お前がやったのか？',
    },
  },
  {
    characters: [
      { name: 'hitoya', position: 'center', expression: 'haa' },
    ],
    speaker: {
      kor: '아마구니 히토야',
      jpn: '天国 獄',
    },
    text: {
      kor: '하아... 이렇게 될 줄 알았다고.',
      jpn: 'はぁ……こうなる気がしてたよ。',
    },
  },
  {
    characters: [
      { name: 'jakurai', position: 'center', expression: 'default' },
    ],
    speaker: {
      kor: '진구지 쟈쿠라이',
      jpn: '神宮寺 寂雷',
    },
    text: {
      kor: '다치진 않았습니까?',
      jpn: '怪我はしていませんか？',
    },
  },
  {
    characters: [
      { name: 'kuko', position: 'center', expression: 'ee' },
    ],
    speaker: {
      kor: '하라이 쿠코',
      jpn: '波羅夷 空却',
    },
    text: {
      kor: '별 거 아니었으니까.',
      jpn: '平気、大したことなかったから。',
    },
  },
  {
    characters: [
      { name: 'ichiro', position: 'center', expression: 'why' },
    ],
    speaker: {
      kor: '야마다 이치로',
      jpn: '山田一郎',
    },
    text: {
      kor: '... 아니야, 이런건 검사를 받아보는 편이 좋아.',
      jpn: '……いや、こういうのは診てもらった方がいいよ。',
    },
  },
  {
    characters: [
      { name: 'hitoya', position: 'center', expression: 'default' },
    ],
    speaker: {
      kor: '아마구니 히토야',
      jpn: '天国 獄',
    },
    text: {
      kor: '그래. 괜한 고집 부리지 마라.',
      jpn: 'そうだ。変に意地張るな。',
    },
  },
  {
    characters: [
      { name: 'kuko', position: 'center', expression: 'men' },
    ],
    speaker: {
      kor: '하라이 쿠코',
      jpn: '波羅夷 空却',
    },
    text: {
      kor: '귀찮은데.. 쳇, 알겠다고.',
      jpn: 'めんどくせーけど……チッ、わかったよ。',
    },
  },
  {
    characters: [
      { name: 'ichiro', position: 'left', expression: 'default' },
      { name: 'kuko', position: 'right', expression: 'owa' }
    ],
    speaker: {
      kor: '하라이 쿠코',
      jpn: '波羅夷 空却',
    },
    text: {
      kor: '미안하게 됐다 이치로. 오늘 데이트는 여기서 끝이다!',
      jpn: 'わりぃな、一郎ぉ。今日のデートはここで終了だ！',
    },
  },
  {
    characters: [
      { name: 'ichiro', position: 'left', expression: 'default' },
      { name: 'kuko', position: 'right', expression: 'owa' }
    ],
    speaker: {
      kor: '야마다 이치로',
      jpn: '山田一郎',
    },
    text: {
      kor: '당연하지! 신경쓰지마.',
      jpn: '当然だろ！気にすんな。',
    },
  },
  {
    characters: [
      { name: 'ichiro', position: 'left', expression: 'default' },
      { name: 'kuko', position: 'right', expression: 'owa' }
    ],
    speaker: {
      kor: '하라이 쿠코',
      jpn: '波羅夷 空却',
    },
    text: {
      kor: '네 동생도 있겠다, 너도 돌아가.',
      jpn: '弟も来てんだしさ、オメーも帰っとけって。',
    },
  },
  {
    characters: [
      { name: 'ichiro', position: 'left', expression: 'waa' },
      { name: 'kuko', position: 'right', expression: 'owa' }
    ],
    speaker: {
      kor: '야마다 이치로',
      jpn: '山田一郎',
    },
    text: {
      kor: '아니, 나도 갈게...!',
      jpn: 'いや、俺も一緒に……！',
    },
  },
  {
    characters: [
      { name: 'ichiro', position: 'left', expression: 'waa' },
      { name: 'kuko', position: 'right', expression: 'men' }
    ],
    speaker: {
      kor: '하라이 쿠코',
      jpn: '波羅夷 空却',
    },
    text: {
      kor: '어차피 소승은 병원 다녀오면 나고야 돌아가야 할 시간일거다.',
      jpn: 'どうせ拙僧は、診察終わったらナゴヤ戻んなきゃなんねだろ。',
    },
  },
  {
    characters: [
      { name: 'ichiro', position: 'left', expression: 'waa' },
      { name: 'kuko', position: 'right', expression: 'default' }
    ],
    speaker: {
      kor: '하라이 쿠코',
      jpn: '波羅夷 空却',
    },
    text: {
      kor: '이런 일로 시간 낭비하면 아깝잖냐.',
      jpn: 'こんなことで時間無駄にすんの、もったいねーだろ？',
    },
  },
  {
    characters: [
      { name: 'ichiro', position: 'left', expression: 'gon' },
      { name: 'kuko', position: 'right', expression: 'default' }
    ],
    speaker: {
      kor: '야마다 이치로',
      jpn: '山田一郎',
    },
    text: {
      kor: '잠깐 쿠코.. 시간낭비라니...',
      jpn: '待てよ空却……時間の無駄って……',
    },
  },
  {
    characters: [
      { name: 'saburo', position: 'center', expression: 'at' },
    ],
    speaker: {
      kor: '야마다 사부로',
      jpn: '山田三郎',
    },
    text: {
      kor: ' !',
      jpn: ' !',
    },
  },
  {
    characters: [
      { name: 'rei', position: 'center', expression: 'default' },
    ],
    speaker: {
      kor: '아마야도 레이',
      jpn: '天谷奴 零',
    },
    text: {
      kor: '왠지 시시하구만~',
      jpn: 'なんかつまんないな〜。',
    },
  },
  {
    characters: [
      { name: 'hitoya', position: 'center', expression: 'haa' },
    ],
    speaker: {
      kor: '아마구니 히토야',
      jpn: '天国 獄',
    },
    text: {
      kor: '하아, 이런 건 취향 아니야.',
      jpn: 'はぁ、こういうのは趣味じゃねーんだよ。',
    },
  },
  {
    characters: [
      { name: 'kuko', position: 'center', expression: 'men' },
    ],
    speaker: {
      kor: '하라이 쿠코',
      jpn: '波羅夷 空却',
    },
    text: {
      kor: '아~ 걷기 힘들어. 히토야아! 태워줘.',
      jpn: 'あ~歩くのも大変だ。 獄ぁ！ 乗せて。',
    },
  },
  {
    characters: [
      { name: 'hitoya', position: 'center', expression: 'default' },
    ],
    speaker: {
      kor: '아마구니 히토야',
      jpn: '天国 獄',
    },
    text: {
      kor: '...오늘은 봐준다. 밑에 차 있으니까 사고친 놈이랑 다친 놈 다 따라와.',
      jpn: '……今日は見逃してやる。下に車あるから、やらかしたやつもケガしたやつも全員乗れ。',
    },
  },
  {
    characters: [
      { name: 'kuko', position: 'center', expression: 'hya' },
    ],
    speaker: {
      kor: '하라이 쿠코',
      jpn: '波羅夷 空却',
    },
    text: {
      kor: '잘 지내라고, 이치로오!',
      jpn: '元気でな、一郎ぉ！',
    },
  },
  {
    characters: [
      { name: 'ichiro', position: 'center', expression: 'ok' },
    ],
    speaker: {
      kor: '야마다 이치로',
      jpn: '山田一郎',
    },
    text: {
      kor: '...그래.',
      jpn: '……ああ。',
    },
  },
  {
    next: './game/end02.html'
  }
];


$(function () {
  const seenEndings = JSON.parse(localStorage.getItem('seenEndings') || '[]');
		const hasEnd05 = seenEndings.includes('end05');

		if (hasEnd05) {
			$('.skipBtn').show();
		} else {
			$('.skipBtn').hide();
		}
    
  initDialogue({ sectionSelector: '.part03_fail_1', script: part03_fail_1 });
});

$('.skipBtn').click(function () {

  let seen = JSON.parse(localStorage.getItem('seenEndings') || '[]');
  if (!seen.includes('end02')) {
    seen.push('end02');
  }
  localStorage.setItem('seenEndings', JSON.stringify(seen));

    const lastLine = part03_fail_1[part03_fail_1.length - 1];
    if (lastLine.next) {
        $('.container-inner').css('opacity', 0).load(lastLine.next, function () {
            $('.container-inner').animate({ opacity: 1 }, 800);
        });
    }
});
