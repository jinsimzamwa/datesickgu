const part04_story2 = [
  {
    characters: [
      { name: 'ichiro', position: 'left', expression: 'default' },
      { name: 'kuko', position: 'right', expression: 'ee' },
    ],
    speaker: {
      kor: '하라이 쿠코',
      jpn: '波羅夷 空却'
    },
    text: {
      kor: '이치로오! 이거 봐라!',
      jpn: '一郎ぉ！これ！'
    }
  },
  {
    characters: [
      { name: 'ichiro', position: 'left', expression: 'default' },
      { name: 'kuko', position: 'right', expression: 'ee' },
    ],
    speaker: {
      kor: '야마다 이치로',
      jpn: '山田一郎'
    },
    text: {
      kor: '아, DRB의 봉제인형 굿즈인가.',
      jpn: 'ああ、DRBのぬいぐるみか。'
    }
  },
  {
    characters: [
      { name: 'ichiro', position: 'left', expression: 'default' },
      { name: 'kuko', position: 'right', expression: 'default' },
    ],
    speaker: {
      kor: '하라이 쿠코',
      jpn: '波羅夷 空却'
    },
    text: {
      kor: '쥬시 녀석이 엄청 뽑는 건 봤어. 너도 가지고 있냐?',
      jpn: '十四がめっちゃ取ってたのは見たけど、お前も持ってんのか？'
    }
  },
  {
    characters: [
      { name: 'ichiro', position: 'left', expression: 'default' },
      { name: 'kuko', position: 'right', expression: 'default' },
    ],
    speaker: {
      kor: '야마다 이치로',
      jpn: '山田一郎'
    },
    text: {
      kor: '당연하지! 일단 지로와 사부로 것은 전부 뽑아서 방에 장식해 두고 있어. 그리고...',
      jpn: '当然だろ！まず二郎と三郎のは全部取って部屋に飾ってるし、それから……'
    }
  },
  {
    characters: [
    ],
    speaker: {
      kor: '',
      jpn: ''
    },
    text: {
      kor: '(부스럭)',
      jpn: '（がさがさ）'
    }
  },
  {
    characters: [
      { name: 'kuko', position: 'center', expression: 'ee' }
    ],
    speaker: {
      kor: '하라이 쿠코',
      jpn: '波羅夷 空却'
    },
    text: {
      kor: '소승 인형들이잖아!',
      jpn: '拙僧のぬいぐるみじゃねーか！'
    }
  },
  {
    characters: [
      { name: 'kuko', position: 'center', expression: 'ee' }
    ],
    speaker: {
      kor: '하라이 쿠코',
      jpn: '波羅夷 空却'
    },
    text: {
      kor: '이걸 다 뽑아서 가지고 다니는 거냐?',
      jpn: 'これ全部取って持ち歩いてんのか？'
    }
  },
  {
    characters: [
      { name: 'ichiro', position: 'center', expression: 'smile' }
    ],
    speaker: {
      kor: '야마다 이치로',
      jpn: '山田一郎'
    },
    text: {
      kor: '그야... 좋아하니까. 당연한 걸.',
      jpn: 'そりゃ…好きだから。あたりまえだろ。'
    }
  },
  {
    characters: [
      { name: 'ichiro', position: 'left', expression: 'smile' },
      { name: 'kuko', position: 'right', expression: 'hya' },
    ],
    speaker: {
      kor: '하라이 쿠코',
      jpn: '波羅夷 空却'
    },
    text: {
      kor: '햣하! 이치로 씨의 갸륵한 마음, 소승이 보답해주지!',
      jpn: 'ヒャッハ！一郎さんのいじらしい想い、拙僧が応えてやろう！'
    }
  },
  {
    characters: [
      { name: 'ichiro', position: 'left', expression: 'default' },
      { name: 'kuko', position: 'right', expression: 'hya' },
    ],
    speaker: {
      kor: '야마다 이치로',
      jpn: '山田一郎'
    },
    text: {
      kor: '뭘 하려고 그래.',
      jpn: '何するつもりだよ。'
    }
  },
  {
    characters: [
      { name: 'ichiro', position: 'left', expression: 'default' },
      { name: 'kuko', position: 'right', expression: 'hat' },
    ],
    speaker: {
      kor: '하라이 쿠코',
      jpn: '波羅夷 空却'
    },
    text: {
      kor: '이치로를 가진다!',
      jpn: '一郎を手に入れる！'
    }
  },
  {
    characters: [
      { name: 'ichiro', position: 'left', expression: 'miso' },
      { name: 'kuko', position: 'right', expression: 'default' },
    ],
    speaker: {
      kor: '야마다 이치로',
      jpn: '山田一郎'
    },
    text: {
      kor: '이미 네꺼잖아.',
      jpn: 'もうお前のもんだろ。'
    }
  },
  {
    characters: [
      { name: 'ichiro', position: 'left', expression: 'default' },
      { name: 'kuko', position: 'right', expression: 'hat' },
    ],
    speaker: {
      kor: '하라이 쿠코',
      jpn: '波羅夷 空却'
    },
    text: {
      kor: '바보, 봉제인형이다!',
      jpn: 'バカ、ぬいぐるみの話だよ！'
    }
  },
  {
    characters: [
      { name: 'rei', position: 'left', expression: 'default' },
      { name: 'saburo', position: 'right', expression: 'default' }
    ],
    speaker: {
      kor: '아마야도 레이',
      jpn: '天谷奴 零'
    },
    text: {
      kor: '오~ 이치로 인형을 직접 뽑으려나본데.',
      jpn: 'お～一郎のぬいぐるみ、自力で取るつもりか？'
    }
  },
  {
    characters: [
      { name: 'rei', position: 'left', expression: 'default' },
      { name: 'saburo', position: 'right', expression: 'ang2' }
    ],
    speaker: {
      kor: '야마다 사부로',
      jpn: '山田三郎'
    },
    text: {
      kor: '감히 이치형의 인형을 멋대로 뽑고, 가지려고 하다니... 믿을 수 없어! 막아야해!',
      jpn: '一兄のぬいぐるみを勝手に取って、持ってこうとするとか…信じらんねぇ！止めなきゃ！'
    }
  },
  {
    characters: [
      { name: 'hitoya', position: 'center', expression: 'haa' }
    ],
    speaker: {
      kor: '아마구니 히토야',
      jpn: '天国 獄'
    },
    text: {
      kor: '아니, 뭘 또 막아.',
      jpn: '止めるって、お前本気か？'
    }
  },
  {
    characters: [
      { name: 'hitoya', position: 'center', expression: 'default' }
    ],
    speaker: {
      kor: '아마구니 히토야',
      jpn: '天国 獄'
    },
    text: {
      kor: '너넨 대체 집에 언제 돌아갈거냐?',
      jpn: 'ったく、お前らはいつになったら帰るんだよ？'
    }
  },
  {
    characters: [
      { name: 'rei', position: 'left', expression: 'default' },
      { name: 'saburo', position: 'right', expression: 'at' }
    ],
    speaker: {
      kor: '아마야도 레이',
      jpn: '天谷奴 零'
    },
    text: {
      kor: '저거 뽑으면 연인 분위기가 물씬 나겠어~',
      jpn: 'それ取ったらな～、完全にカップルモード突入だな？'
    }
  },
  {
    characters: [
      { name: 'rei', position: 'left', expression: 'laugh' },
      { name: 'saburo', position: 'right', expression: 'at' }
    ],
    speaker: {
      kor: '아마야도 레이',
      jpn: '天谷奴 零'
    },
    text: {
      kor: '아주 러브러브 끝내주겠구만! 하하!',
      jpn: 'ラブラブでたまんねぇな！ははっ！'
    }
  },
  {
    characters: [
      { name: 'rei', position: 'left', expression: 'default' },
      { name: 'saburo', position: 'right', expression: 'ang2' }
    ],
    speaker: {
      kor: '야마다 사부로',
      jpn: '山田三郎'
    },
    text: {
      kor: '아악!!!',
      jpn: 'ああ！！！'
    }
  },
  {
    characters: [
      { name: 'jakurai', position: 'center', expression: 'idle' }
    ],
    speaker: {
      kor: '神宮寺 寂雷',
      jpn: '神宮寺 寂雷'
    },
    text: {
      kor: '하지만 사부로 군, 이번 만은 방해할 수 없을 것 같습니다.',
      jpn: 'でも、三郎くん。今回は邪魔できないかもしれません。'
    }
  },
  {
    characters: [
      { name: 'jakurai', position: 'center', expression: 'idle' }
    ],
    speaker: {
      kor: '神宮寺 寂雷',
      jpn: '神宮寺 寂雷'
    },
    text: {
      kor: '크레인 기계 내부는 창으로 막혀있고, 기계를 조작할 수도 없고요.',
      jpn: 'クレーンゲームはガラスで囲われているから、操作もできないんです。'
    }
  },
  {
    characters: [
      { name: 'saburo', position: 'center', expression: 'yata' }
    ],
    speaker: {
      kor: '야마다 사부로',
      jpn: '山田三郎'
    },
    text: {
      kor: '기계를 조작... 그거다!',
      jpn: '操作…それだ！'
    }
  },
  {
    characters: [
      { name: 'saburo', position: 'center', expression: 'yata' }
    ],
    speaker: {
      kor: '야마다 사부로',
      jpn: '山田三郎'
    },
    text: {
      kor: '저 기계를 해킹해서 절대 못뽑게 막아주겠어!',
      jpn: 'あの機械をハッキングして、絶対取れないようにしてやる！'
    }
  },
  {
    characters: [
      { name: 'hitoya', position: 'left', expression: 'haaa' },
      { name: 'rei', position: 'right', expression: 'default' },
    ],
    speaker: {
      kor: '아마구니 히토야',
      jpn: '天国 獄'
    },
    text: {
      kor: '쓸데없이 유능하지 마라!',
      jpn: '無駄に有能なことすんな！'
    }
  },
  {
    characters: [
      { name: 'hitoya', position: 'left', expression: 'haaa' },
      { name: 'rei', position: 'right', expression: 'laugh' },
    ],
    speaker: {
      kor: '아마야도 레이',
      jpn: '天谷奴 零'
    },
    text: {
      kor: '오락실 매상도 오르고, 좋네~',
      jpn: 'ゲーセンの売上も上がって、いいじゃん〜。'
    }
  },
  {
    characters: [
      { name: 'hitoya', position: 'left', expression: 'haaa' },
      { name: 'rei', position: 'right', expression: 'default' },
    ],
    speaker: {
      kor: '아마구니 히토야',
      jpn: '天国 獄'
    },
    text: {
      kor: '사기잖아!',
      jpn: 'それ詐欺だろ！'
    }
  },
  {
    characters: [
      { name: 'hitoya', position: 'left', expression: 'haaa' },
      { name: 'rei', position: 'right', expression: 'laugh' },
    ],
    speaker: {
      kor: '아마야도 레이',
      jpn: '天谷奴 零'
    },
    text: {
      kor: '아저씨는 사기꾼이니까 상관없는데~',
      jpn: 'おいちゃんは詐欺師だから気にしな〜い♪'
    }
  },
  {
    characters: [
      { name: 'saburo', position: 'center', expression: 'ang1' }
    ],
    speaker: {
      kor: '야마다 사부로',
      jpn: '山田三郎'
    },
    text: {
      kor: '내가 해킹프로그램을 돌릴테니까 잘 보라고! 쓸모없는 놈들!',
      jpn: '僕がハッキングプログラム動かすから、よーく見てな！ポンコツ共！'
    }
  },
  {
    characters: [
      { name: 'hitoya', position: 'center', expression: 'haa' }
    ],
    speaker: {
      kor: '아마구니 히토야',
      jpn: '天国 獄'
    },
    text: {
      kor: '하아...',
      jpn: 'はぁ…。'
    }
  },
  {
    next: './game/part04_game.html'
  }
];


$(function () {
    const seenEndings = JSON.parse(localStorage.getItem('seenEndings') || '[]');
		const hasEnd05 = seenEndings.includes('end05');

		if (hasEnd05) {
			$('.skipBtn').show();
		} else {
			$('.skipBtn').hide();
		}
    
  initDialogue({ sectionSelector: '.part04_story2', script: part04_story2 });
});

$('.skipBtn').click(function () {
    const lastLine = part04_story2[part04_story2.length - 1];
    if (lastLine.next) {
        $('.container-inner').css('opacity', 0).load(lastLine.next, function () {
            $('.container-inner').animate({ opacity: 1 }, 800);
        });
    }
});
